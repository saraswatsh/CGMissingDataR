<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Run missingness benchmark — run_missingness_benchmark • CGMissingDataR</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run missingness benchmark — run_missingness_benchmark"><meta name="description" content="Benchmarks model performance under feature missingness. The function:
Filters to complete cases for target_col and feature_cols (baseline complete data),
Splits into training/validation,
Masks feature values at each rate using Bernoulli (cell-wise) missingness,
Imputes missing features using MICE on training data and applies the fitted imputation model to
validation data via mice::mice.mids(newdata = ...) (reduces leakage),
Trains Random Forest (ranger) and kNN regression (FNN::knn.reg),
Returns MAPE and R-squared for each model and mask rate.


Feature columns must be numeric (or coercible to numeric without introducing new missing values).
This mirrors workflows where features are treated as numeric arrays."><meta property="og:description" content="Benchmarks model performance under feature missingness. The function:
Filters to complete cases for target_col and feature_cols (baseline complete data),
Splits into training/validation,
Masks feature values at each rate using Bernoulli (cell-wise) missingness,
Imputes missing features using MICE on training data and applies the fitted imputation model to
validation data via mice::mice.mids(newdata = ...) (reduces leakage),
Trains Random Forest (ranger) and kNN regression (FNN::knn.reg),
Returns MAPE and R-squared for each model and mask rate.


Feature columns must be numeric (or coercible to numeric without introducing new missing values).
This mirrors workflows where features are treated as numeric arrays."><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CGMissingDataR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.0.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ZhangLabUKY/CGMissingDataR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Run missingness benchmark</h1>
      <small class="dont-index">Source: <a href="https://github.com/ZhangLabUKY/CGMissingDataR/blob/master/R/run_bench.R" class="external-link"><code>R/run_bench.R</code></a></small>
      <div class="d-none name"><code>run_missingness_benchmark.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Benchmarks model performance under feature missingness. The function:</p><ol><li><p>Filters to complete cases for <code>target_col</code> and <code>feature_cols</code> (baseline complete data),</p></li>
<li><p>Splits into training/validation,</p></li>
<li><p>Masks feature values at each rate using Bernoulli (cell-wise) missingness,</p></li>
<li><p>Imputes missing features using MICE on training data and applies the fitted imputation model to
validation data via <code>mice::mice.mids(newdata = ...)</code> (reduces leakage),</p></li>
<li><p>Trains Random Forest (<code>ranger</code>) and kNN regression (<code><a href="https://rdrr.io/pkg/FNN/man/knn.reg.html" class="external-link">FNN::knn.reg</a></code>),</p></li>
<li><p>Returns MAPE and R-squared for each model and mask rate.</p></li>
</ol><p>Feature columns must be numeric (or coercible to numeric without introducing new missing values).
This mirrors workflows where features are treated as numeric arrays.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">run_missingness_benchmark</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">target_col</span>,</span>
<span>  feature_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mask_rates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>  rf_n_estimators <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  knn_k <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  test_size <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">42</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data.frame (or object coercible to data.frame) containing the dataset.</p></dd>


<dt id="arg-target-col">target_col<a class="anchor" aria-label="anchor" href="#arg-target-col"></a></dt>
<dd><p>Single character string: name of the outcome column.</p></dd>


<dt id="arg-feature-cols">feature_cols<a class="anchor" aria-label="anchor" href="#arg-feature-cols"></a></dt>
<dd><p>Character vector of feature column names. If <code>NULL</code>,
uses all columns except <code>target_col</code>.</p></dd>


<dt id="arg-mask-rates">mask_rates<a class="anchor" aria-label="anchor" href="#arg-mask-rates"></a></dt>
<dd><p>Numeric vector in (0, 1): proportion of feature entries to mask per rate.</p></dd>


<dt id="arg-rf-n-estimators">rf_n_estimators<a class="anchor" aria-label="anchor" href="#arg-rf-n-estimators"></a></dt>
<dd><p>Integer: number of trees for the random forest.</p></dd>


<dt id="arg-knn-k">knn_k<a class="anchor" aria-label="anchor" href="#arg-knn-k"></a></dt>
<dd><p>Integer: number of neighbors for kNN regression.</p></dd>


<dt id="arg-test-size">test_size<a class="anchor" aria-label="anchor" href="#arg-test-size"></a></dt>
<dd><p>Numeric in (0, 1): fraction of rows assigned to validation split.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Integer: seed for data split and model reproducibility.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data.frame with columns <code>MaskRate</code>, <code>Model</code>, <code>MAPE</code>, and <code>R2</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Validation imputation is performed using <code>mice::mice.mids(newdata = ...)</code>, which generates imputations
for new data according to the model stored in the training <code>mids</code> object.</p>
<p>MAPE is computed using <code><a href="https://rdrr.io/pkg/Metrics/man/mape.html" class="external-link">Metrics::mape()</a></code> on non-zero targets only to avoid instability when actual values are zero.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Shubh Saraswat, Hasin Shahed Shad, and Xiaohua Douglas Zhang</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"CGMExampleData"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">run_missingness_benchmark</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">CGMExampleData</span>,</span></span>
<span class="r-in"><span>  target_col <span class="op">=</span> <span class="st">"LBORRES"</span>,</span></span>
<span class="r-in"><span>  feature_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TimeDifferenceMinutes"</span>, <span class="st">"TimeSeries"</span>, <span class="st">"USUBJID"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  mask_rates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  rf_n_estimators <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>  knn_k <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Number of logged events: 1</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Number of logged events: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   MaskRate         Model     MAPE        R2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       5% Random Forest 7.519025 0.7402591</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       5%           kNN 8.140677 0.7095650</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      10% Random Forest 8.520641 0.6684686</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      10%           kNN 9.417613 0.6036350</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shubh Saraswat, Hasin Shahed Shad, Xiaohua Douglas Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

